<h1>
  <small>CDP neighbors of device</small> <%= @device_name %>
  <a href="https://r2.grenoble.hp.com/operations/direct/infra/<%= @device_id %>"><span class="fa fa-external-link"></span></a>
  <small>id: <%= @device_id %></small>
</h1>

<table class="table table-striped table-condensed">
  <thead>
  <tr>
    <th>Hostname</th>
    <th>IP Addresses</th>
    <th>Platform</th>
    <th>Capabilities</th>
    <th>Connected Interfaces</th>
    <th>Duplex</th>
  </tr>
  </thead>
  <tbody>
<% @device_cdp.each_with_index do |cdp, i| %>
      <tr>
        <td><%= link_to_if(@device_cdp_neighbors[i][:infrid].present?, cdp[:hostname], "/cmdb/devices/#{@device_cdp_neighbors[i][:infrid]}") %></td>
        <td><%= cdp[:mgmt_address].join(", ") %></td>
        <td><%= cdp[:platform] %></td>
        <td><%= cdp[:capabilities].gsub(" ", ", ") %></td>
        <td><%= cdp[:interface] %> <i class="fa fa-long-arrow-right"></i> <%= cdp[:src_interface] %></td>
        <td><%= cdp[:duplex] %></td>
      </tr>
<% end %>
  </tbody>
</table>

<%= puts @device_cdp_neighbors %>
