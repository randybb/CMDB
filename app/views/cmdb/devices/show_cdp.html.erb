<h1>CMDB:Device:CDP <%= @device_name %></h1>

<table class="table table-striped table-condensed">
  <thead>
  <tr>
    <th>Hostname</th>
    <th>IP Addresses</th>
    <th>Platform</th>
    <th>Capabilities</th>
    <th>Connected Interfaces</th>
    <th>Duplex</th>
  </tr>
  </thead>
  <tbody>
<% @device_cdp.each_with_index do |cdp, i| %>
      <tr>
        <td><%= link_to_if(@device_cdp_neighbors[i][:infrid].present?, cdp[:hostname], "/cmdb/devices/#{@device_cdp_neighbors[i][:infrid]}") %></td>
        <td><%= cdp[:mgmt_address].join(", ") %></td>
        <td><%= cdp[:platform] %></td>
        <td><%= cdp[:capabilities].gsub(" ", ", ") %></td>
        <td><%= cdp[:interface] %> <i class="fa fa-long-arrow-right"></i> <%= cdp[:ne_interface] %></td>
        <td><%= cdp[:duplex] %></td>
      </tr>
<% end %>
  </tbody>
</table>

<%= puts @device_cdp_neighbors %>
